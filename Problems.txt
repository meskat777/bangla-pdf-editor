Project Context: I am developing a professional web-based PDF editor called "Universal PDF Suite." The application uses a FastAPI backend (Python) and a Vanilla JS/HTML5 Canvas frontend. The core functionality involves selecting a region, performing OCR (EasyOCR), and allowing users to edit detected text using an Image Overlay Method (Pillow + PyMuPDF).

Current Issue: When a user selects a rectangular region containing multiple words, the current implementation applies a white mask (rectangle) over the entire selection area. Consequently, if a user edits only one word in a line, the surrounding words within the selection box are unintentionally hidden.

Your Objective: Provide a high-level logical workflow to transition from Selection-based Masking to Word-Level Precision Masking. Please explain the logic for the following steps:
1. Word-Level Bounding Box Segmentation

    Instead of treating the user's drag-selection as a single unit, how should the system utilize the OCR result (which returns individual word bounding boxes) to create isolated interactive input fields in the UI?

    Explain the logic of mapping the raw OCR coordinates to the relative position within the frontend container.

2. Localized Masking Logic (The "Precision" Part)

    Describe the backend process for "Cleaning" only the specific area of the modified word.

    If a user edits a specific word, the backend should only apply a white rectangle (draw_rect in PyMuPDF) to that word's unique bounding box (x0,y0,x1,y1), preserving the neighboring text on the same line.

3. High-Resolution Coordinate Mapping

    Explain the mathematical scaling required to convert Browser UI Pixels (where the user interacts) to PDF Points (internal coordinate system).

    Consider the ratio: Scale=Displayed_Image_WidthOriginal_PDF_Widthâ€‹. How should this scale be applied to the x,y coordinates and the font size to ensure the new text fits perfectly into the original word's footprint?

4. Pillow-based Transparent Text Rendering

    How should the system use the Pillow library to create a transparent PNG overlay for a single word?

    Describe how to calculate the optimal canvas size and font DPI so that the rendered image doesn't appear pixelated when inserted into the PDF.

5. Multi-Layer Preservation

    Briefly explain the sequence of operations in the PDF content stream:

        Identifying the specific word's Rect.

        Drawing a solid white mask on the Overlay layer.

        Inserting the Pillow-generated transparent image on the top layer.
